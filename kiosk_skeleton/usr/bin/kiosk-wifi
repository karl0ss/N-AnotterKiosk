#!/bin/bash

WIFI_SSID=$(get-ini /boot/kioskbrowser.ini wifi ssid)
WIFI_PSK=$(get-ini /boot/kioskbrowser.ini wifi psk)
WIFI_COUNTRY=$(get-ini /boot/kioskbrowser.ini wifi country)

if [ -n "${WIFI_COUNTRY}" ]
then
    nmcli general reload conf-only
fi

if [ -n "${WIFI_SSID}" ]
then
    nmcli device wifi connect "${WIFI_SSID}" password "${WIFI_PSK}" || true
fi
